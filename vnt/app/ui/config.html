<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png"
        href="data:image/png;base64,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" />
    <title>é…ç½®æ–‡ä»¶ç”Ÿæˆå™¨</title>
    <style>
        * {
            box-sizing: border-box;
            transition: all 0.3s ease;
        }

        body {
            font-family: "Microsoft YaHei", sans-serif;
            background: linear-gradient(to right, #f0f4ff, #ffffff);
            margin: 0;
            padding: 30px;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
        }

        .form,
        .output {
            flex: 1 1 480px;
            background: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
            animation: fadeIn 0.6s ease forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h2 {
            margin-top: 0;
            font-size: 22px;
            color: #2c3e50;
            text-align: center;
        }

        label {
            font-weight: bold;
            display: block;
            margin: 15px 0 6px;
            color: #34495e;
        }

        input,
        select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 15px;
            background-color: #f9f9f9;
        }

        .server-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .server-group select {
            width: 100px;
        }

        .server-group input {
            flex: 1;
        }

        .list-group {
            margin-top: 5px;
        }

        .list-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
        }

        .list-item input {
            flex: 1;
            padding: 8px;
            border-radius: 6px;
        }

        .list-item .btn-group {
            display: flex;
            gap: 6px;
        }

        .list-item button {
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 6px 10px;
            font-size: 14px;
            cursor: pointer;
        }

        .btn-group-inline {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .add-btn {
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 6px 10px;
            font-size: 14px;
            cursor: pointer;
        }

        .button-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }

        button {
            background-color: #2ecc71;
            color: white;
            padding: 10px 18px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            min-width: 120px;
        }

        button:hover {
            opacity: 0.95;
            transform: scale(1.03);
        }

        .output pre {
            white-space: pre-wrap;
            background-color: #f8f8f8;
            border-radius: 12px;
            padding: 20px;
            height: 65vh;
            overflow-y: auto;
            font-size: 15px;
            color: #2c3e50;
            border: 1px solid #dcdcdc;
        }

        @media (max-width: 768px) {

            .form,
            .output {
                flex: 1 1 100%;
            }
        }

        /* çº¢è‰²è¾¹æ¡†å’Œé—ªçƒåŠ¨ç”» */
        .input-error {
            border-color: red !important;
            outline: none;
        }

        @keyframes blink-red {

            0%,
            100% {
                box-shadow: 0 0 5px 2px rgba(255, 0, 0, 0.7);
            }

            50% {
                box-shadow: none;
            }
        }

        .blink {
            animation: blink-red 1s infinite;
        }

        .divider-toggle {
            margin: 30px 0 10px;
            text-align: center;
            position: relative;
            cursor: pointer;
            font-weight: bold;
            color: #3498db;
            user-select: none;
        }

        .divider-toggle::before,
        .divider-toggle::after {
            content: "";
            height: 2px;
            background: #ccc;
            position: absolute;
            top: 50%;
            width: 40%;
        }

        .divider-toggle::before {
            left: 0;
        }

        .divider-toggle::after {
            right: 0;
        }

        .section-subtitle {
            display: flex;
            align-items: center;
            text-align: center;
            margin: 30px 0 10px;
            color: #056578;
            font-weight: bold;
            user-select: none;
            gap: 10px;
        }

        .section-subtitle::before,
        .section-subtitle::after {
            content: "";
            flex: 1;
            height: 1px;
            background: #ccc;
        }

        .section-subtitle::before {
            left: 0;
        }

        .section-subtitle::after {
            right: 0;
        }

        .form-line {
            display: flex;
            align-items: center;
            gap: 16px;
            margin: 12px 0;
        }

        .form-line>label {
            width: 180px;
            /* å’Œå…¶å®ƒ label å·¦å¯¹é½ä¸€è‡´ */
            font-weight: bold;
            color: #34495e;
        }

        .wg-toggle {
            display: flex;
            gap: 20px;
        }

        .custom-radio {
            position: relative;
            padding-left: 24px;
            cursor: pointer;
            font-size: 15px;
            user-select: none;
        }

        .custom-radio input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .box-check {
            position: absolute;
            left: 0;
            top: 2px;
            width: 16px;
            height: 16px;
            border: 1px solid #999;
            border-radius: 2px;
            background: #fff;
        }

        .custom-radio input:checked+.box-check::after {
            content: "âœ“";
            position: absolute;
            left: 2px;
            top: -2px;
            font-size: 14px;
            color: #000;
        }

        .inline-hint {
            font-size: 12px;
            color: #f1c40f;
            /* é»„è‰² */
            margin-left: 8px;
            display: none;
        }

        button:disabled {
            background-color: #ccc;
            color: #888;
            cursor: not-allowed;
            box-shadow: none;
            transform: none !important;
            opacity: 0.7;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- å·¦ä¾§è¾“å…¥åŒºåŸŸ -->
        <div class="form">
            <h2>VNTå¯åŠ¨å‚æ•°</h2>

            <div class="section-subtitle">
                <span>åŸºæœ¬å‚æ•°</span>
            </div>
            <label title="-k  ä½¿ç”¨ç›¸åŒçš„tokenå’ŒæœåŠ¡å™¨,å°±èƒ½ç»„å»ºä¸€ä¸ªè™šæ‹Ÿå±€åŸŸç½‘ç»œ">ç»„ç½‘Token:</label><input id="token" placeholder="xxx" />
            <label title="--ip  æŒ‡å®šè™šæ‹Ÿip,æŒ‡å®šçš„ipä¸èƒ½å’Œå…¶ä»–è®¾å¤‡é‡å¤,å¿…é¡»æœ‰æ•ˆå¹¶ä¸”åœ¨æœåŠ¡ç«¯æ‰€å±ç½‘æ®µä¸‹,ç•™ç©ºåˆ™ç”±æœåŠ¡ç«¯åˆ†é…">è™šæ‹ŸIPv4:</label><input id="ip"
                placeholder="10.26.0.2" />
            <label title="-d  è®¾å¤‡å”¯ä¸€æ ‡è¯†ç¬¦,ä¸ä½¿ç”¨--ipå‚æ•°æ—¶,æœåŠ¡ç«¯å‡­æ­¤å‚æ•°åˆ†é…è™šæ‹Ÿip,æ³¨æ„ä¸èƒ½å’Œå…¶ä»–å®¢æˆ·ç«¯é‡å¤">è®¾å¤‡ID:</label><input id="device_id"
                placeholder="10.26.0.2" />
            <label title="-n  ç»™è®¾å¤‡ä¸€ä¸ªåå­—,ä¾¿äºåŒºåˆ†ä¸åŒè®¾å¤‡">è®¾å¤‡åç§°:</label><input id="name" placeholder="é£ç‰›NAS" />

            <label title="-s  æ³¨å†Œå’Œä¸­ç»§æœåŠ¡å™¨åœ°å€,åè®®æ”¯æŒä½¿ç”¨ udp tcp å’Œ ws å’Œ wss ">æœåŠ¡å™¨åœ°å€:</label>
            <div class="server-group">
                <select id="protocol">
                    <option value="udp">UDP</option>
                    <option value="tcp">TCP</option>
                    <option value="ws">WS</option>
                    <option value="wss">WSS</option>
                </select>
                <input id="server_address" placeholder="vnt.wherewego.top:29872" />
            </div>

            <label
                title="--compressor  å¯ç”¨æ•°æ®æµé‡å‹ç¼©,é»˜è®¤ä»…æ”¯æŒlz4å‹ç¼©ï¼Œå¼€å¯å‹ç¼©åï¼Œå¦‚æœæ•°æ®åŒ…é•¿åº¦å¤§äºç­‰äº128ï¼Œåˆ™ä¼šä½¿ç”¨å‹ç¼©ï¼Œå¦åˆ™è¿˜æ˜¯ä¼šæŒ‰åŸæ•°æ®å‘é€ï¼Œä¹Ÿæ”¯æŒå¼€å¯zstdå‹ç¼©ï¼Œä½†æ˜¯éœ€è¦è‡ªè¡Œç¼–è¯‘ç¨‹åºï¼Œç¼–è¯‘æ—¶åŠ å…¥å‚æ•°--features zstd">å‹ç¼©æ–¹å¼:</label>
            <select id="compressor">
                <option value="">ä¸å‹ç¼©</option>
                <option value="lz4">lz4</option>
                <option value="zstd">zstd</option>
            </select>

            <div class="form-line">
                <label for="allow_wire_guard"
                    title="--allow-wg  å…è®¸æ¥å…¥WireGuardå®¢æˆ·ç«¯ï¼Œå’Œwgæ··ç”¨æ—¶å¿…é¡»å¼€å¯æ­¤å‚æ•°ï¼Œè¡¨ç¤ºå…è®¸ç”±æœåŠ¡å™¨è½¬å‘æ¥çš„wgæµé‡è®¿é—®æœ¬æœº">å…è®¸WireGuardæµé‡:</label>
                <div class="wg-toggle">
                    <label class="custom-radio">
                        <input type="radio" name="allow_wire_guard" value="true">
                        <span class="box-check"></span>å¼€å¯
                    </label>
                    <label class="custom-radio">
                        <input type="radio" name="allow_wire_guard" value="false" checked>
                        <span class="box-check"></span>å…³é—­
                    </label>
                </div>
            </div>


            <div class="section-subtitle">
                <span>å­ç½‘ä»£ç†&ç«¯å£æ˜ å°„</span>
            </div>
            <label title="-o  é…ç½®ç‚¹å¯¹ç½‘æ—¶ä½¿ç”¨,-o 192.168.0.0/24è¡¨ç¤ºå…è®¸å°†æ•°æ®è½¬å‘åˆ°192.168.0.0/24,å¯æŒ‡å®šå¤šä¸ªç½‘æ®µ">æœ¬åœ°ç½‘æ®µ(out-ip):</label>
            <div id="out_ips" class="list-group"></div>
            <button class="add-btn" onclick="addListItem('out_ips')">+ æ·»åŠ </button>

            <label
                title="-i  é…ç½®ç‚¹å¯¹ç½‘(IPä»£ç†)æ—¶ä½¿ç”¨,-i 192.168.3.0/24,10.26.0.3è¡¨ç¤ºå…è®¸æ¥æ”¶ç½‘æ®µ192.168.3.0/24çš„æ•°æ®å¹¶è½¬å‘åˆ°10.26.0.3,å¯æŒ‡å®šå¤šä¸ªç½‘æ®µ">å¯¹ç«¯ç½‘æ®µ(in-ip):</label>
            <div id="in_ips" class="list-group"></div>
            <button class="add-btn" onclick="addListItem('in_ips')">+ æ·»åŠ </button>

            <label
                title="--mapping  ç«¯å£æ˜ å°„,å¯ä»¥è®¾ç½®å¤šä¸ªæ˜ å°„åœ°å€ï¼Œä¾‹å¦‚ udp:0.0.0.0:80-10.26.0.10:80 å’Œ tcp:0.0.0.0:80-10.26.0.11:81 è¡¨ç¤ºå°†æœ¬åœ°udp 80ç«¯å£çš„æ•°æ®è½¬å‘åˆ°10.26.0.10:80ï¼Œå°†æœ¬åœ°tcp 80ç«¯å£çš„æ•°æ®è½¬å‘åˆ°10.26.0.11:81ï¼Œè½¬å‘çš„ç›®çš„åœ°å€å¯ä»¥ä½¿ç”¨åŸŸå+ç«¯å£">ç«¯å£æ˜ å°„:</label>
            <div id="mapping" class="list-group"></div>
            <button class="add-btn" onclick="addListItem('mapping')">+ æ·»åŠ </button>

            <div class="section-subtitle">
                <span>ä¼ è¾“å®‰å…¨</span>
            </div>
            <label
                title="--model  åŠ å¯†æ¨¡å¼(é»˜è®¤aes_gcm), ç‰¹åˆ«è¯´æ˜ï¼šxoråªæ˜¯å¯¹æ•°æ®è¿›è¡Œç®€å•å¼‚æˆ–ï¼Œä»…ä»…é¿å…äº†æ˜æ–‡ä¼ è¾“ï¼Œå®‰å…¨æ€§å¾ˆå·®ï¼ŒåŒæ—¶å¯¹æ€§èƒ½å½±å“ä¹Ÿæå°ï¼Œä½æ€§èƒ½è®¾å¤‡é€‰æ‹©xoræˆ–aes_ecbé€Ÿåº¦æœ€å¿«">åŠ å¯†æ–¹å¼:</label>
            <select id="cipher_model">
                <option value="aes_gcm">aes_gcm</option>
                <option value="aes_cbc">aes_cbc</option>
                <option value="aes_ecb">aes_ecb</option>
                <option value="sm4_cbc">sm4_cbc</option>
                <option value="chacha20_poly1305">chacha20_poly1305</option>
                <option value="chacha20">chacha20</option>
                <option value="xor">xor</option>
            </select>
            <label
                title="-w  ä½¿ç”¨è¯¥å¯†ç ç”Ÿæˆçš„å¯†é’¥å¯¹å®¢æˆ·ç«¯æ•°æ®è¿›è¡ŒåŠ å¯†,å¹¶ä¸”æœåŠ¡ç«¯æ— æ³•è§£å¯†,ä½¿ç”¨ç›¸åŒå¯†ç çš„å®¢æˆ·ç«¯æ‰èƒ½é€šä¿¡ï¼Œæ˜¯ç”¨äºå®¢æˆ·ç«¯-å®¢æˆ·ç«¯ä¹‹é—´çš„åŠ å¯†ï¼Œå¯†ç ä¸ä¼šä¼ é€’åˆ°æœåŠ¡ç«¯ï¼Œåªæ·»åŠ è¿™ä¸ªå‚æ•°ä¸ä¼šåŠ å¯†å®¢æˆ·ç«¯-æœåŠ¡ç«¯é€šä¿¡çš„æ•°æ®ï¼ˆç•™ç©ºåˆ™ä¸ä¼šä½¿ç”¨åŠ å¯†ï¼‰">ç»„ç½‘å¯†ç :</label><input
                id="password" placeholder="xxx" />

            <div class="form-line">
                <label for="server_encrypt"
                    title="-W  åŠ å¯†å½“å‰å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é€šä¿¡çš„æ•°æ®,è¯·ç•™æ„æœåŠ¡ç«¯æŒ‡çº¹æ˜¯å¦æ­£ç¡®ï¼Œé‡‡ç”¨rsa+aes256gcmåŠ å¯†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´é€šä¿¡çš„æ•°æ®ï¼Œå¯ä»¥é¿å…tokenæ³„æ¼ã€ä¸­é—´äººæ”»å‡»">æœåŠ¡ç«¯åŠ å¯†:</label>
                <div class="wg-toggle">
                    <label class="custom-radio">
                        <input type="radio" name="server_encrypt" value="true">
                        <span class="box-check"></span>å¼€å¯
                    </label>
                    <label class="custom-radio">
                        <input type="radio" name="server_encrypt" value="false" checked>
                        <span class="box-check"></span>å…³é—­
                    </label>
                </div>
            </div>

            <div class="form-line">
                <label for="finger"
                    title="--finger  å¼€å¯æ•°æ®æŒ‡çº¹æ ¡éªŒï¼Œå¯å¢åŠ å®‰å…¨æ€§ï¼Œå¦‚æœæœåŠ¡ç«¯å¼€å¯æŒ‡çº¹æ ¡éªŒï¼Œåˆ™å®¢æˆ·ç«¯ä¹Ÿå¿…é¡»å¼€å¯ï¼Œå¼€å¯ä¼šæŸè€—ä¸€éƒ¨åˆ†æ€§èƒ½ï¼Œæ³¨æ„ï¼šé»˜è®¤æƒ…å†µä¸‹æœåŠ¡ç«¯ä¸ä¼šå¯¹ä¸­è½¬çš„æ•°æ®åšæ ¡éªŒï¼Œå¦‚æœè¦å¯¹ä¸­è½¬çš„æ•°æ®åšæ ¡éªŒï¼Œåˆ™éœ€è¦å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯éƒ½å¼€å¯æ­¤å‚æ•°">æ•°æ®æŒ‡çº¹æ ¡éªŒ:</label>
                <div class="wg-toggle">
                    <label class="custom-radio">
                        <input type="radio" name="finger" value="true">
                        <span class="box-check"></span>å¼€å¯
                    </label>
                    <label class="custom-radio">
                        <input type="radio" name="finger" value="false" checked>
                        <span class="box-check"></span>å…³é—­
                    </label>
                </div>
            </div>

            <!-- é«˜çº§è®¾ç½®å¼€å…³æŒ‰é’® -->

            <div class="divider-toggle" onclick="toggleAdvanced()">å±•å¼€é«˜çº§è®¾ç½®</div>

            <!-- é«˜çº§è®¾ç½®åŒºåŸŸï¼ˆé»˜è®¤éšè—ï¼‰ -->
            <div id="advanced-section" style="display: none; margin-top: 15px;">

                <label
                    title="--local-dev  å½“ä½¿ç”¨å¯¹ç«¯ä½œä¸ºå‡ºå£èŠ‚ç‚¹æ—¶éœ€è¦æŒ‡å®šæœ¬æœºçš„æµé‡å‡ºå£ç½‘å¡åç§°ï¼Œæˆ–æœ¬æœºæ˜¯duoWANæ¥å…¥æ—¶ä¹Ÿéœ€è¦æŒ‡å®šå‡†ç¡®çš„å‡ºå£ç½‘å¡åç§°">æœ¬åœ°å‡ºå£ç½‘å¡çš„åç§°:</label><input
                    id="local_dev" placeholder="eth0" />
                <label title="--nic  æŒ‡å®šè™šæ‹Ÿç½‘å¡åç§°ï¼ˆé»˜è®¤ä¸º vnt-tunï¼‰">è™šæ‹Ÿç½‘å¡åç§°:</label><input id="device_name"
                    placeholder="vnt-tun" />
                <label title="-u  è‡ªå®šä¹‰è™šæ‹Ÿç½‘å¡çš„mtuå€¼(é»˜è®¤ä¸º1420)">è™šæ‹Ÿç½‘å¡MTU:</label><input id="mtu" placeholder="1420" />
                <label title="--punch  é€‰æ‹©åªä½¿ç”¨çš„æ‰“æ´æ–¹å¼ï¼Œé»˜è®¤éƒ½ä¼šä½¿ç”¨">æ‰“æ´æ¨¡å¼:</label>
                <select id="punch_model">
                    <option value="">è‡ªåŠ¨é€‰æ‹©</option>
                    <option value="ipv4">ipv4</option>
                    <option value="ipv6">ipv6</option>
                    <option value="ipv4-tcp">ipv4-tcp</option>
                    <option value="ipv4-udp">ipv4-udp</option>
                    <option value="ipv6-tcp">ipv6-tcp</option>
                    <option value="ipv6-udp">ipv6-udp</option>
                </select>
                <label
                    title="--use-channel  â‘  relay:ä»…ä¸­ç»§æ¨¡å¼ï¼Œä¼šç¦æ­¢æ‰“æ´/p2pç›´è¿ï¼Œåªä½¿ç”¨æœåŠ¡å™¨è½¬å‘ã€‚ â‘¡ p2p:ä»…ç›´è¿æ¨¡å¼ï¼Œä¼šç¦æ­¢ç½‘ç»œæ•°æ®ä»æœåŠ¡å™¨/å®¢æˆ·ç«¯è½¬å‘ï¼Œåªä¼šä½¿ç”¨æœåŠ¡å™¨è½¬å‘æ§åˆ¶åŒ…ã€‚">ä¼ è¾“æ¨¡å¼:</label>
                <select id="use_channel">
                    <option value="">è‡ªåŠ¨é€‰æ‹©</option>
                    <option value="relay">relayï¼ˆä»…ä¸­ç»§ï¼‰</option>
                    <option value="p2p">p2pï¼ˆä»…ç›´è¿ï¼‰</option>
                </select>
                <label
                    title="--ports  æŒ‡å®šæœ¬åœ°ç›‘å¬çš„ç«¯å£ç»„ï¼Œå¤šä¸ªç«¯å£ä½¿ç”¨é€—å·åˆ†éš”ï¼Œå¤šä¸ªç«¯å£å¯ä»¥åˆ†æ‘Šæµé‡ï¼Œå¢åŠ å¹¶å‘ã€å‡ç¼“æµé‡é™åˆ¶ï¼Œtcpä¼šç›‘å¬ç«¯å£ç»„çš„ç¬¬ä¸€ä¸ªç«¯å£ï¼Œç”¨äºtcpç›´è¿ã€‚">ç›‘å¬ç«¯å£:</label>
                <div id="ports" class="list-group"></div>
                <button class="add-btn" onclick="addListItem('ports')">+ æ·»åŠ </button>

                <label title="--first-latency  é»˜è®¤æƒ…å†µä¸‹ä¼˜å…ˆä½¿ç”¨p2pé€šé“ï¼ŒæŸäº›æƒ…å†µä¸‹å¯èƒ½p2pæ¯”å®¢æˆ·ç«¯ä¸­ç»§å»¶è¿Ÿæ›´é«˜ï¼Œå¯ä½¿ç”¨ä½å»¶è¿Ÿä¼˜å…ˆæ¥è¿›è¡Œä¼˜åŒ–ä¼ è¾“">è·¯å¾„æ¨¡å¼:</label>
                <select id="first_latency">
                    <option value="false">P2Pä¼˜å…ˆï¼ˆè¡¨ç¤ºå®¢æˆ·ç«¯ç›´è¿ä¼˜å…ˆï¼‰</option>
                    <option value="true">ä½å»¶è¿Ÿä¼˜å…ˆï¼ˆå¯èƒ½ç»è¿‡æœåŠ¡å™¨è½¬å‘ï¼‰</option>
                </select>

                <div class="form-line">
                    <label for="no_proxy"
                        title="--no-proxy  å†…ç½®çš„ä»£ç†è¾ƒä¸ºç®€å•ï¼Œè€Œä¸”ä¸€èˆ¬æ¥è¯´ç›´æ¥ä½¿ç”¨ç½‘å¡NATè½¬å‘æ€§èƒ½ä¼šæ›´é«˜ï¼Œ æœ‰éœ€è¦å¯ä»¥è‡ªè¡Œé…ç½®NATè½¬å‘ï¼ˆå…³é—­åéœ€è¦è‡ªè¡Œé…ç½®é˜²ç«å¢™è§„åˆ™è½¬å‘ï¼‰">å†…ç½®IPä»£ç†:</label>
                    <div class="wg-toggle">
                        <label class="custom-radio">
                            <input type="radio" name="no_proxy" value="false" checked>
                            <span class="box-check"></span>å¼€å¯
                        </label>
                        <label class="custom-radio">
                            <input type="radio" name="no_proxy" value="true">
                            <span class="box-check"></span>å…³é—­
                        </label>
                    </div>
                </div>

                <label
                    title="--dns  è®¾ç½®åŸŸåè§£ææœåŠ¡å™¨åœ°å€ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªã€‚å¦‚æœä½¿ç”¨TXTè®°å½•çš„åŸŸåï¼Œåˆ™dnsé»˜è®¤ä½¿ç”¨223.5.5.5å’Œ114.114.114.114ï¼Œç«¯å£çœç•¥å€¼ä¸º53 ï¼Œå½“åœ°å€è§£æå¤±è´¥æ—¶ï¼Œä¼šä¾æ¬¡å°è¯•åé¢çš„dnsï¼Œç›´åˆ°æœ‰Aè®°å½•ã€AAAAè®°å½•(æˆ–TXTè®°å½•)çš„è§£æç»“æœã€‚ï¼ˆå®‰å“é¢å…·æ¨¡å—ä½¿ç”¨å¿…é¡»è¦æŒ‡å®šï¼‰">DNSæœåŠ¡å™¨:</label>
                <div id="dns" class="list-group"></div>
                <button class="add-btn" onclick="addListItem('dns', '', '8.8.8.8')">+ æ·»åŠ </button>

                <label title="-e  stunæœåŠ¡å™¨,ç”¨äºæ¢æµ‹NATç±»å‹,å¯ä½¿ç”¨å¤šä¸ªåœ°å€">STUNæœåŠ¡å™¨:</label>
                <div id="stun" class="list-group"></div>
                <button class="add-btn" onclick="addListItem('stun')">+ æ·»åŠ </button>

                <div class="form-line">
                    <label for="disable_stats" title="--disable-stats  å…³é—­æµé‡ç»Ÿè®¡ï¼Œå‡å°‘æ€§èƒ½å ç”¨ï¼ˆä½æ€§èƒ½è®¾å¤‡å»ºè®®å…³é—­ï¼‰">æµé‡ç»Ÿè®¡:</label>
                    <div class="wg-toggle">
                        <label class="custom-radio">
                            <input type="radio" name="disable_stats" value="false" checked>
                            <span class="box-check"></span>å¼€å¯
                        </label>
                        <label class="custom-radio">
                            <input type="radio" name="disable_stats" value="true">
                            <span class="box-check"></span>å…³é—­
                        </label>
                    </div>
                </div>

                <div class="form-line">
                    <label for="disable_cmd" title="--cmd  å¼€å¯äº¤äº’å¼å‘½ä»¤,ä½¿ç”¨æ­¤å‚æ•°å¼€å¯æ§åˆ¶å°è¾“å…¥">æ§åˆ¶å°è¾“å…¥:</label>
                    <div class="wg-toggle">
                        <label class="custom-radio">
                            <input type="radio" name="disable_cmd" value="true">
                            <span class="box-check"></span>å¼€å¯
                        </label>
                        <label class="custom-radio">
                            <input type="radio" name="disable_cmd" value="false" checked>
                            <span class="box-check"></span>å…³é—­
                        </label>
                    </div>
                </div>

                <label title="--packet-loss  æ¨¡æ‹Ÿä¸¢åŒ…,å–å€¼0~1ä¹‹é—´çš„å°æ•°,ç¨‹åºä¼šæŒ‰è®¾å®šçš„æ¦‚ç‡ä¸»åŠ¨ä¸¢åŒ…,å¯ç”¨äºæ¨¡æ‹Ÿå¼±ç½‘ç¯å¢ƒè¿›è¡Œæµ‹è¯•">
                    æ¨¡æ‹Ÿä¸¢åŒ…ç‡:
                </label>
                <input id="packet_loss" type="number" min="0" max="1" step="0.01" placeholder="0" />

                <label title="--packet-delay æ¨¡æ‹Ÿå»¶è¿Ÿï¼Œæ­£æ•´æ•°ï¼Œå•ä½æ¯«ç§’ï¼Œç¨‹åºå°†æ ¹æ®è®¾å®šå€¼å»¶è¿Ÿå‘é€æ•°æ®åŒ…ï¼Œå¯ç”¨äºæ¨¡æ‹Ÿå¼±ç½‘ç¯å¢ƒè¿›è¡Œæµ‹è¯•">
                    æ¨¡æ‹Ÿå»¶è¿Ÿï¼ˆmsï¼‰:
                </label>
                <input id="packet_delay" type="number" min="1" step="1" placeholder="0" />

            </div>

            <br><button class="button-group" onclick="generateConfig()">ç”Ÿæˆé…ç½®</button>
        </div>

        <!-- å³ä¾§è¾“å‡ºåŒºåŸŸ -->
        <div class="output">
            <h2>é…ç½®æ–‡ä»¶ç”ŸæˆåŒºåŸŸ</h2>
            <pre id="output">è¯·å…ˆå¡«å†™å¯åŠ¨å‚æ•°åå†ç‚¹å‡»ç”Ÿæˆé…ç½®ï¼Œå¤åˆ¶åˆ°é£ç‰›NASé‡Œå³å¯ï¼</pre>
            <div class="button-group">
                <button id="copyBtn" onclick="copyOutput()" disabled>å¤åˆ¶</button>
                <button id="downloadBtn" onclick="downloadYaml()" disabled>ä¸‹è½½</button>
            </div>
        </div>
    </div>

    <script>
        function toggleAdvanced() {
            const section = document.getElementById("advanced-section");
            const btn = event.target;

            if (section.style.display === "none") {
                section.style.display = "block";
                btn.textContent = "æ”¶èµ·é«˜çº§è®¾ç½®";
            } else {
                section.style.display = "none";
                btn.textContent = "å±•å¼€é«˜çº§è®¾ç½®";
            }
        }
        // æ·»åŠ ä¸€è¡Œè¾“å…¥é¡¹
        function addListItem(id, value = "", placeholder = "") {
            const group = document.getElementById(id);
            const div = document.createElement("div");
            div.className = "list-item";
            const input = document.createElement("input");
            input.value = value;
            if (placeholder) input.placeholder = placeholder;
            const removeBtn = document.createElement("button");
            removeBtn.textContent = "- ç§»é™¤";
            removeBtn.onclick = () => div.remove();
            div.appendChild(input);
            div.appendChild(removeBtn);
            group.appendChild(div);
        }

        // è·å–æ‰€æœ‰è¾“å…¥å€¼ç»„æˆæ•°ç»„
        function getList(id) {
            const inputs = document.querySelectorAll(`#${id} input`);
            return Array.from(inputs).map(el => el.value.trim()).filter(v => v !== "");
        }

        // è·å–å•å€¼
        const getVal = id => document.getElementById(id).value.trim();

        // æ˜¾ç¤ºé”™è¯¯ï¼Œæ”¯æŒæ¶ˆæ¯å†…å®¹ä¼ å…¥
        function showTokenError(message) {
            const tokenInput = document.getElementById("token");
            tokenInput.classList.add("input-error");
            tokenInput.focus();

            // ç§»é™¤æ—§æç¤ºï¼Œé¿å…é‡å¤
            const oldError = document.getElementById("token-error");
            if (oldError) oldError.remove();

            // æ–°å»ºæç¤º
            const error = document.createElement("div");
            error.id = "token-error";
            error.style.color = "red";
            error.style.fontSize = "13px";
            error.style.marginTop = "4px";
            error.textContent = message;
            tokenInput.insertAdjacentElement("afterend", error);

            // æ·»åŠ é—ªçƒåŠ¨ç”»
            tokenInput.classList.add("blink");
        }


        // æ¸…é™¤ token é”™è¯¯æç¤ºå’Œæ ·å¼
        function clearTokenError() {
            const tokenInput = document.getElementById("token");
            tokenInput.classList.remove("input-error", "blink");
            const error = document.getElementById("token-error");
            if (error) error.remove();
        }
        // æ˜¾ç¤º ip é”™è¯¯æç¤º
        function showIpError(message) {
            const ipInput = document.getElementById("ip");
            ipInput.classList.add("input-error");
            ipInput.focus();

            const oldError = document.getElementById("ip-error");
            if (oldError) oldError.remove();

            const error = document.createElement("div");
            error.id = "ip-error";
            error.style.color = "red";
            error.style.fontSize = "13px";
            error.style.marginTop = "4px";
            error.textContent = message;
            ipInput.insertAdjacentElement("afterend", error);

            ipInput.classList.add("blink");
        }

        function clearIpError() {
            const ipInput = document.getElementById("ip");
            ipInput.classList.remove("input-error", "blink");
            const error = document.getElementById("ip-error");
            if (error) error.remove();
        }

        // æ ¡éªŒæ˜¯å¦ä¸ºåˆæ³•IPv4åœ°å€
        function isValidIPv4(ip) {
            const parts = ip.split('.');
            if (parts.length !== 4) return false;
            for (let part of parts) {
                if (!/^\d+$/.test(part)) return false; // ä¸æ˜¯çº¯æ•°å­—
                const num = Number(part);
                if (num < 0 || num > 255) return false; // æ•°å€¼èŒƒå›´éæ³•
            }
            return true;
        }

        // æ˜¾ç¤º mtu é”™è¯¯æç¤º
        function showMtuError(message) {
            const mtuInput = document.getElementById("mtu");
            mtuInput.classList.add("input-error");
            mtuInput.focus();

            const oldError = document.getElementById("mtu-error");
            if (oldError) oldError.remove();

            const error = document.createElement("div");
            error.id = "mtu-error";
            error.style.color = "red";
            error.style.fontSize = "13px";
            error.style.marginTop = "4px";
            error.textContent = message;
            mtuInput.insertAdjacentElement("afterend", error);

            mtuInput.classList.add("blink");
        }

        function clearMtuError() {
            const mtuInput = document.getElementById("mtu");
            mtuInput.classList.remove("input-error", "blink");
            const error = document.getElementById("mtu-error");
            if (error) error.remove();
        }

        // æ˜¾ç¤ºé”™è¯¯ï¼Œæ”¯æŒæ¶ˆæ¯å†…å®¹ä¼ å…¥
        function showdeviceidError(message) {
            const deviceidInput = document.getElementById("device_id");
            deviceidInput.classList.add("input-error");
            deviceidInput.focus();

            // ç§»é™¤æ—§æç¤ºï¼Œé¿å…é‡å¤
            const oldError = document.getElementById("deviceid-error");
            if (oldError) oldError.remove();

            // æ–°å»ºæç¤º
            const error = document.createElement("div");
            error.id = "deviceid-error";
            error.style.color = "red";
            error.style.fontSize = "13px";
            error.style.marginTop = "4px";
            error.textContent = message;
            deviceidInput.insertAdjacentElement("afterend", error);

            // æ·»åŠ é—ªçƒåŠ¨ç”»
            deviceidInput.classList.add("blink");
        }


        // æ¸…é™¤ deviceid é”™è¯¯æç¤ºå’Œæ ·å¼
        function cleardeviceidError() {
            const deviceidInput = document.getElementById("device_id");
            deviceidInput.classList.remove("input-error", "blink");
            const error = document.getElementById("deviceid-error");
            if (error) error.remove();
        }

        // æ˜¾ç¤º packet_loss é”™è¯¯æç¤º
        function showPacketLossError(message) {
            const input = document.getElementById("packet_loss");
            input.classList.add("input-error");
            input.focus();

            const oldError = document.getElementById("packet_loss-error");
            if (oldError) oldError.remove();

            const error = document.createElement("div");
            error.id = "packet_loss-error";
            error.style.color = "red";
            error.style.fontSize = "13px";
            error.style.marginTop = "4px";
            error.textContent = message;
            input.insertAdjacentElement("afterend", error);

            input.classList.add("blink");
        }

        function clearPacketLossError() {
            const input = document.getElementById("packet_loss");
            input.classList.remove("input-error", "blink");
            const error = document.getElementById("packet_loss-error");
            if (error) error.remove();
        }

        // æ˜¾ç¤º packet_delay é”™è¯¯æç¤º
        function showPacketDelayError(message) {
            const input = document.getElementById("packet_delay");
            input.classList.add("input-error");
            input.focus();

            const oldError = document.getElementById("packet_delay-error");
            if (oldError) oldError.remove();

            const error = document.createElement("div");
            error.id = "packet_delay-error";
            error.style.color = "red";
            error.style.fontSize = "13px";
            error.style.marginTop = "4px";
            error.textContent = message;
            input.insertAdjacentElement("afterend", error);

            input.classList.add("blink");
        }

        function clearPacketDelayError() {
            const input = document.getElementById("packet_delay");
            input.classList.remove("input-error", "blink");
            const error = document.getElementById("packet_delay-error");
            if (error) error.remove();
        }

        // ç”Ÿæˆé…ç½®
        function generateConfig() {
            clearTokenError();
            clearIpError();
            clearMtuError();
            cleardeviceidError();
            clearPacketLossError();
            clearPacketDelayError();

            const tokenVal = getVal("token");
            const ipVal = getVal("ip");
            const mtuVal = getVal("mtu");
            const deviceidVal = getVal("device_id");
            const packetLossVal = getVal("packet_loss");
            const packetDelayVal = getVal("packet_delay");

            // 1. å¿…å¡«æ ¡éªŒ
            if (!tokenVal) {
                showTokenError("è¿™æ˜¯å¿…å¡«é¡¹å“¦ï¼Œå¯åˆ«æ¼äº†å“¦~");
                return; // é˜»æ­¢ç”Ÿæˆ
            }
            // 2. é•¿åº¦æ ¡éªŒ
            if (tokenVal.length > 63) {
                showTokenError("å¤ªé•¿äº†å§ï¼Œä¸èƒ½è¶…è¿‡63ä¸ªå­—ç¬¦å“¦~");
                return; // é˜»æ­¢ç”Ÿæˆ
            }
            // 3. IDæ ¡éªŒ
            if (!deviceidVal) {
                showdeviceidError("å»ºè®®å¡«å†™ä¸€ä¸ªè®¾å¤‡IDå“¦ï¼Œé˜²æ­¢é‡å¯è®¾å¤‡åå®¢æˆ·ç«¯è™šæ‹Ÿipè¢«å ç”¨~");
                return; // é˜»æ­¢ç”Ÿæˆ
            }
            // 4. ip æ ¡éªŒï¼ˆéç©ºæ—¶æ ¡éªŒï¼‰
            if (ipVal && !isValidIPv4(ipVal)) {
                showIpError("è¯·è¾“å…¥æœ‰æ•ˆçš„IPv4åœ°å€!");
                return;
            }

            // 5.mtu æ ¡éªŒï¼ˆéç©ºæ—¶æ ¡éªŒï¼‰
            if (mtuVal) {
                const mtuNum = Number(mtuVal);
                if (!Number.isInteger(mtuNum) || mtuNum < 68 || mtuNum > 9000) {
                    showMtuError("è¯·è¾“å…¥68åˆ°9000ä¹‹é—´çš„æ•´æ•°!");
                    return;
                }
            }

            // 6.æ ¡éªŒ packet_loss
            if (packetLossVal) {
                const lossNum = Number(packetLossVal);
                if (isNaN(lossNum) || lossNum < 0 || lossNum > 1) {
                    showPacketLossError("ä¸¢åŒ…ç‡å¿…é¡»æ˜¯0åˆ°1ä¹‹é—´çš„å°æ•°");
                    return;
                }
            }

            // 7.æ ¡éªŒ packet_delay
            if (packetDelayVal) {
                const delayNum = Number(packetDelayVal);
                if (!Number.isInteger(delayNum) || delayNum < 0 || delayNum > 10000) {
                    showPacketDelayError("å»¶è¿Ÿå¿…é¡»æ˜¯0åˆ°10000ä¹‹é—´çš„æ•´æ•°ï¼ˆå•ä½æ¯«ç§’ï¼‰");
                    return;
                }
                if (/^0\d+/.test(packetDelayVal)) {
                    showPacketDelayError("å»¶è¿Ÿå€¼ä¸èƒ½ä»¥0å¼€å¤´");
                    return;
                }
            }

            let config = [];

            const push = (key, value, comment = "") => {
                config.push(`${key}: ${value}${comment ? `   # ${comment}` : ""}`);
            };

            const pushList = (key, list, comment = "") => {
                if (list.length > 0) {
                    config.push(`${key}:${comment ? `   # ${comment}` : ""}`);
                    list.forEach(item => config.push(`  - ${item}`));
                }
            };

            if (getVal("token")) push("token", getVal("token"), "ç»„ç½‘token");
            if (getVal("ip")) push("ip", getVal("ip"), "æœ¬æœºè™šæ‹Ÿip");
            if (getVal("device_id")) push("device_id", getVal("device_id"), "å½“å‰è®¾å¤‡id");
            if (getVal("name")) push("name", getVal("name"), "å½“å‰è®¾å¤‡åç§°");

            const proto = getVal("protocol");
            const addr = getVal("server_address");
            if (proto && addr) {
                push("server_address", `${proto}://${addr}`, "æ³¨å†Œå’Œä¸­ç»§æœåŠ¡å™¨");
            }

            if (getVal("compressor")) push("compressor", getVal("compressor"), "å‹ç¼©æ–¹å¼");
            const wgRadio = document.querySelector('input[name="allow_wire_guard"]:checked');
            const wgAllowed = wgRadio ? wgRadio.value : "false";
            if (wgAllowed === "true") {
                push("allow_wire_guard", "true", "ä¸ºtrueåˆ™è¡¨ç¤ºå…è®¸æ¥å…¥wg");
            }
            pushList("in_ips", getList("in_ips"), "å¯¹ç«¯ç½‘æ®µ(ä»£ç†ipå…¥ç«™)");
            pushList("out_ips", getList("out_ips"), "æœ¬åœ°ç½‘æ®µ(ä»£ç†ipå‡ºç«™)");
            pushList("mapping", getList("mapping"), "ç«¯å£æ˜ å°„");
            const password = getVal("password");
            const cipherModel = getVal("cipher_model");
            if (password) {
                // å¦‚æœåŠ å¯†æ–¹å¼ä¸ä¸ºé»˜è®¤çš„ aes_gcm æ‰å†™å…¥é…ç½®
                if (cipherModel && cipherModel !== "aes_gcm") {
                    push("cipher_model", cipherModel, "åŠ å¯†æ–¹å¼");
                }
                // æœ‰å¯†ç æ—¶å…ˆ push password
                push("password", password, "ç»„ç½‘å¯†ç ");
            }
            const seRadio = document.querySelector('input[name="server_encrypt"]:checked');
            const serverencrypt = seRadio ? seRadio.value : "false";
            if (serverencrypt === "true") {
                push("server_encrypt", "true", "ä¸ºtrueåˆ™è¡¨ç¤ºå¯ç”¨æœåŠ¡ç«¯åŠ å¯†");
            }
            const fRadio = document.querySelector('input[name="finger"]:checked');
            const sfinger = fRadio ? fRadio.value : "false";
            if (sfinger === "true") {
                push("finger", "true", "ä¸ºtrueåˆ™è¡¨ç¤ºå¯ç”¨æ•°æ®æŒ‡çº¹æ ¡éªŒ");
            }
            if (getVal("local_dev")) push("local_dev", getVal("local_dev"), "æœ¬åœ°å‡ºå£ç½‘å¡çš„åç§°");
            if (getVal("device_name")) push("device_name", getVal("device_name"), "è™šæ‹Ÿç½‘å¡åç§°");
            if (getVal("mtu")) push("mtu", getVal("mtu"), "mtu");
            if (getVal("punch_model")) push("punch_model", getVal("punch_model"), "æ‰“æ´æ¨¡å¼");
            if (getVal("use_channel")) push("use_channel", getVal("use_channel"), "ä¼ è¾“æ¨¡å¼");
            pushList("ports", getList("ports"), "ç›‘å¬ç«¯å£");
            if (getVal("first_latency") === "true") {
                push("first_latency", "true", "è·¯å¾„æ¨¡å¼-ä¸ºtrueè¡¨ç¤ºå»¶è¿Ÿä¼˜å…ˆ");
            }
            const npRadio = document.querySelector('input[name="no_proxy"]:checked');
            const noproxy = npRadio ? npRadio.value : "false";
            if (noproxy === "true") {
                push("no_proxy", "true", "ä¸ºtrueåˆ™è¡¨ç¤ºå…³é—­å†…ç½®IPä»£ç†(å…³é—­åéœ€è¦è‡ªè¡Œé…ç½®é˜²ç«å¢™è§„åˆ™è½¬å‘)");
            }
            pushList("dns", getList("dns"), "dnsæœåŠ¡å™¨");
            pushList("stun_server", getList("stun"), "stunæœåŠ¡å™¨");
            const dsRadio = document.querySelector('input[name="disable_stats"]:checked');
            const disablestats = dsRadio ? dsRadio.value : "false";
            if (disablestats === "true") {
                push("disable_stats", "true", "ä¸ºtrueåˆ™è¡¨ç¤ºå…³é—­æµé‡ç»Ÿè®¡(ä½æ€§èƒ½è®¾å¤‡ä¸å»ºè®®å¼€å¯ä¼šå ç”¨éƒ¨åˆ†æ€§èƒ½)");
            }
            const cmdRadio = document.querySelector('input[name="disable_cmd"]:checked');
            const disablecmd = cmdRadio ? cmdRadio.value : "false";
            if (disablecmd === "true") {
                push("cmd", "true", "ä¸ºtrueåˆ™è¡¨ç¤ºå¼€å¯æ§åˆ¶å°è¾“å…¥");
            }
            const loss = getVal("packet_loss");
            if (loss && loss !== "0") {
                push("packet_loss", loss, "æŒ‡å®šä¸¢åŒ…ç‡ å–å€¼0~1ä¹‹é—´çš„æ•° ç”¨äºæ¨¡æ‹Ÿå¼±ç½‘");
            }
            const delay = getVal("packet_delay");
            if (delay && delay !== "0") {
                push("packet_delay", delay, "æŒ‡å®šå»¶è¿Ÿ å•ä½æ¯«ç§’ ç”¨äºæ¨¡æ‹Ÿå¼±ç½‘");
            }

            document.getElementById("output").textContent = config.join("\n");
            document.getElementById("copyBtn").disabled = false;
            document.getElementById("downloadBtn").disabled = false;
            // ğŸ”½ è‡ªåŠ¨æ»šåŠ¨åˆ°è¾“å‡ºåŒºåŸŸ
            document.getElementById("output").scrollIntoView({
                behavior: "smooth", // å¹³æ»‘æ»šåŠ¨
                block: "start"      // æ»šåŠ¨åˆ°é¡¶éƒ¨
            });
        }

        function copyOutput() {
            const output = document.getElementById("output");
            const range = document.createRange();
            range.selectNode(output);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            document.execCommand("copy");
            alert("é…ç½®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼");
        }

        function downloadYaml() {
            const content = document.getElementById("output").textContent;
            const blob = new Blob([content], { type: "text/yaml;charset=utf-8;" });
            const url = URL.createObjectURL(blob);
            const link = document.createElement("a");
            link.setAttribute("href", url);
            link.setAttribute("download", "vnt_config.yaml");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        ["stun", "in_ips", "out_ips", "mapping", "dns", "ports"].forEach(id => {
            if (id === "stun") {
                addListItem(id, "", "turn.cloudflare.com");
            } else if (id === "in_ips") {
                addListItem(id, "", "192.168.3.0/24,10.26.0.3");
            } else if (id === "out_ips") {
                addListItem(id, "", "192.168.0.0/24");
            } else if (id === "mapping") {
                addListItem(id, "", "udp:0.0.0.0:80-10.26.0.10:80");
            } else if (id === "dns") {
                addListItem(id, "", "223.5.5.5");
            } else if (id === "ports") {
                addListItem(id, "", "0");
            }

        });
        // ç›‘å¬è¾“å…¥ï¼Œå®æ—¶æ¸…é™¤é”™è¯¯
        document.getElementById("token").addEventListener("input", () => {
            clearTokenError();
        });
        document.getElementById("ip").addEventListener("input", () => {
            clearIpError();
        });
        document.getElementById("mtu").addEventListener("input", () => {
            clearMtuError();
        });
        document.getElementById("device_id").addEventListener("input", () => {
            cleardeviceidError();
        });
        document.querySelectorAll("label[title]").forEach(label => {
            const hintSpan = document.createElement("span");
            hintSpan.className = "inline-hint";
            label.appendChild(hintSpan);

            // å°è¯•æ‰¾åˆ° inputã€select æˆ–å…¶çˆ¶å®¹å™¨ä¸­çš„å…ƒç´ 
            let input = label.nextElementSibling;

            // å¦‚æœä¸‹ä¸€ä¸ªä¸æ˜¯ input/selectï¼Œç»§ç»­æ‰¾å†…éƒ¨çš„ input æˆ– select
            if (input && !(input.tagName === "INPUT" || input.tagName === "SELECT")) {
                input = input.querySelector("input, select");
            }

            // æ‰¾åˆ°äº†å°±ç»‘å®š focus å’Œ blur
            if (input) {
                input.addEventListener("focus", () => {
                    hintSpan.textContent = label.getAttribute("title");
                    hintSpan.style.display = "inline";
                });
                input.addEventListener("blur", () => {
                    hintSpan.style.display = "none";
                });
            }

            // ç‰¹æ®Šå¤„ç† radio æŒ‰é’®ç»„ï¼šç›‘å¬åŒä¸€ç»„çš„æ‰€æœ‰ radio
            const name = input?.name;
            if (input?.type === "radio" && name) {
                const radios = document.querySelectorAll(`input[type="radio"][name="${name}"]`);
                radios.forEach(radio => {
                    radio.addEventListener("focus", () => {
                        hintSpan.textContent = label.getAttribute("title");
                        hintSpan.style.display = "inline";
                    });
                    radio.addEventListener("blur", () => {
                        hintSpan.style.display = "none";
                    });
                });
            }
        });

    </script>
</body>

</html>
